# FrontISTR ver. 5.0 ユーザーマニュアル
<!-- this is a comment. -->

<!-- 文部科学省次世代ＩＴ基盤構築のための研究開発
「イノベーション基盤シミュレーションソフトウェアの研究開発」-->

本ソフトウェアは文部科学省次世代ＩＴ基盤構築のための研究開発「イノベーション基盤シミュレーションソフトウェアの研究開発」プロジェクトによる成果物です。
本ソフトウェアを無償または営利目的でご使用になる場合、「MITライセンス」をご了承頂くことが前提となります。

<img src="./image/FrontISTR_logo.png" width="300px">

| FrontISTR | Version 5.0 |
|:---------:|:---------|
| ライセンス形態 | MIT License |
| 問い合わせ先 | FrontISTR研究会<br> 〒277-8563 千葉県柏市柏の葉5-1-5<br> 東京大学大学院新領域創成科学研究科 奥田研究室（気付）<br> E-mail：fstr_seminar@multi.k.u-tokyo.ac.jp |

## 目次

* [1. はじめに](#section1)
    - [1.1 本書の位置づけ](#section1.1)
    - [1.2 本書の目的](#section1.2)
    - [1.3 Version 5.0における更新内容](#section1.3)
* [2. 有限要素法解析理論](#section2)
    - [2.1 微小変形線形弾性静解析]()
    - [　2.1.1 基礎方程式]()
    - [　2.1.2 仮想仕事の原理]()
    - [　2.1.3 定式化]()
    - [2.2 非線形静解析手法]()
    - [　2.2.1 幾何学的非線形解析手法]()
    - [　　2.2.1.1 仮想仕事式の増分分解]()
    - [　　2.2.1.2 仮想仕事の原理]()
    - [　　2.2.1.3 total Lagrange法の定式化]()
    - [　　2.2.1.4 updated Lagrange法の定式化]()
    - [　2.2.2 材料非線形解析手法]()
    - [　　2.2.2.1 超弾性材料]()
    - [　　2.2.2.2 弾塑性材料]()
    - [　　2.2.2.3 粘弾性材料]()
    - [　　2.2.2.4 クリープ材料]()
    - [　2.2.3 接触解析手法]()
    - [2.3 固有値解析]()
    - [　2.3.1 一般化固有値問題]()
    - [　2.3.2 問題設定]()
    - [　2.3.3 シフト付逆反復法]()
    - [　2.3.4 固有値解法のための算法]()
    - [　2.3.5 ランチョス法]()
    - [　2.3.6 ランチョス法が持つ幾何学的意味]()
    - [　2.3.7 三重対角化]()
    - [2.4 熱伝導解析]()
    - [　2.4.1 基礎方程式]()
    - [　2.4.2 離散化]()
    - [2.5 動的解析手法]()
    - [　2.5.1 陰解法の定式化について]()
    - [　　2.5.1.2 質量項の取り扱い]()
    - [　　2.5.1.3 減衰項の取り扱い]()
    - [　2.5.2 陽解法の定式化について]()
    - [2.6 周波数応答解析]()
    - [　2.6.1 定式化]()
* [3. 解析の流れと入出力ファイル]()
    - [3.1 解析の流れ]()
    - [3.2 全体制御データ]()
    - [3.3 メッシュデータ]()
    - [3.4 解析制御データ]()
    - [3.5 出力ファイル]()
    - [3.6 実行方法]()
    - [　3.6.1 FrontISTR の準備]()
    - [　3.6.2 入力ファイルの準備]()
    - [　3.6.3 単一領域の解析実行]()
    - [　3.6.4 Linux 上での並列実行]()
    - [　3.6.5 Windows 上での並列実行]()
    - [　3.6.6 並列接触解析の実行]()
    - [3.7 実行時の制約]()
* [4. 要素ライブラリおよび材料データ]()
    - [4.1 要素ライブラリ]()
    - [4.2 材料データ]()
    - [　4.2.1 弾性静解析、線形動的解析および固有値解析]()
    - [　4.2.2 熱伝導解析]()
    - [　　4.2.2.1 リンク、平面およびソリッド要素の場合]()
    - [　　4.2.2.2 インターフェース要素の場合]()
    - [　　4.2.2.3 シェル要素の場合]()
    - [　4.2.3 非線形静解析]()
* [5. 全体制御データ]()
    - [5.1 全体制御データ概要]()
    - [5.2 入力規則]()
    - [5.3 ヘッダー一覧]()
    - [　5.3.1 !CONTROL]()
    - [　5.3.2 !MESH]()
    - [　5.3.3 !RESTRAT]()
    - [　5.3.4 !RESULT]()
    - [　5.3.5 !SUBDIR]()
* [6.  単一領域メッシュデータ]()
    - [6.1 単一メッシュデータ概要]()
    - [6.2 入力規則]()
    - [6.3 単一領域メッシュデータのヘッダー一覧]()
    - [　6.3.1 !AMPLITUDE]()
    - [　6.3.2 !EGROUP]()
    - [　6.3.3 !ELEMENT]()
    - [　6.3.4 !EQUATION]()
    - [　6.3.5 !HEADER]()
    - [　6.3.6 !INITIAL CONDITION]()
    - [　6.3.7 !MATERIAL]()
    - [　6.3.8 !NGROUP]()
    - [　6.3.9 !NODE]()
    - [　6.3.10 !SECTION]()
    - [　6.3.11 !SGROUP]()
    - [　6.3.12 !ZERO]()
    - [　6.3.13 !CONTACT PAIR]()
    - [　6.3.14 !END]()
* [7.  解析制御データ]()
    - [7.1 解析制御データ概要]()
    - [7.2 入力規則]()
    - [7.3 解析制御データ]()
    - [　7.3.1 計算制御データのヘッダー一覧]()
    - [　　7.3.1.1 全解析に共通な制御データ]()
    - [　　7.3.1.2 静解析制御データ]()
    - [　　7.3.1.3 固有値解析制御データ]()
    - [　　7.3.1.4 熱伝導解析制御データ]()
    - [　　7.3.1.5 動解析制御データ]()
    - [　　7.3.1.6 動解析（周波数応答解析）制御データ]()
    - [　7.3.2 ソルバー制御データ]()
    - [　7.3.3 ポスト処理(可視化)制御データ]()
    - [7.4 解析制御データのパラメータ詳細]()
    - [　7.4.1 共通制御データ]()
    - [　　7.4.1.1 !VERSION]()
    - [　　7.4.1.2 !SOLUTION]()
    - [　　7.4.1.3 !WRITE, VISUA]()
    - [　　7.4.1.4 !WRITE, RESULT]()
    - [　　7.4.1.5 !WRITE, LOG]()
    - [　　7.4.1.6 !OUTPUT_VIS]()
    - [　　7.4.1.7 !OUTPUT_RES]()
    - [　　7.4.1.8 !RESTART]()
    - [　　7.4.1.9 !ECHO]()
    - [　　7.4.1.10 !ORIENTATION]()
    - [　　7.4.1.11 !SECTION]()
    - [　　7.4.1.12 !END]()
    - [　7.4.2 静解析用制御データ]()
    - [　　7.4.2.1 !STATIC]()
    - [　　7.4.2.2 !MATERIAL]()
    - [　　7.4.2.3 !ELASTIC]()
    - [　　7.4.2.4 !PLASTIC]()
    - [　　7.4.2.15 !HYPERELASTIC]()
    - [　　7.4.2.6 !VISCOELASTIC]()
    - [　　7.4.2.17 !CREEP]()
    - [　　7.4.2.18 !DENSITY]()
    - [　　7.4.2.19 !EXPANSION_COEFF]()
    - [　　7.4.2.10 !USER_MATERIAL]()
    - [　　7.4.2.11 !BOUNDARY]()
    - [　　7.4.2.12 !SPRING]()
    - [　　7.4.2.13 !CLOAD]()
    - [　　7.4.2.14 !DLOAD]()
    - [　　7.4.2.15 !ULOAD]()
    - [　　7.4.2.16 !CONTACT_ALGO]()
    - [　　7.4.2.17 !CONTACT]()
    - [　　7.4.2.18 !TEMPERATURE]()
    - [　　7.4.2.19 !REFTEMP]()
    - [　　7.4.2.20 !STEP]()
    - [　　7.4.2.21 !TR]()
    - [7.4.3 固有値解析用制御データ]()
    - [　　7.4.3.1 !EIGEN]()
    - [7.4.4 熱伝導解析用制御データ]()
    - [(1) !HEAT]()
    - [(2) !FIXTEMP]()
    - [(3) !CFLUX]()
    - [(4) !DFLUX]()
    - [(5) !SFLUX]()
    - [(6) !FILM]()
    - [(7) !SFILM]()
    - [(8) !RADIATE]()
    - [(9) !SRADIATE]()
    - [(10)  !WELD_LINE]()
    - [7.4.5 動解析用制御データ]()
    - [(1) !DYNAMIC]()
    - [(2) !VELOCITY]()
    - [(3) !ACCELERATION]()
    - [(4) !COUPLE]()
    - [(5) !EIGENREAD]()
    - [(6) !FLOAD]()
    - [7.4.6 ソルバー制御データ]()
    - [(1) !SOLVER]()
    - [7.4.7 ポスト処理（可視化）制御データ]()
    - [(1) !VISUAL]()
    - [(2) !surface_num, !surface, !surface_style]()
    - [(3) !display_method]()
    - [(4) !color_comp_name　!color_comp　!color_subcomp]()
    - [(5) !isoline_number　!isoline_color]()
    - [(6) !initial_style　!deform_style]()
    - [(7) !deform_scale]()
    - [(8) !output_type]()
    - [(9) !x_resolution　!y_resolution]()
    - [(10)  !viewpoint　!look_at_point　!up_direction]()
    - [(11)  !ambient_coef　!diffuse_coef　!specular_coef]()
    - [(12)  !color_mapping_bar_on !scale_marking_on !num_of_scales]()
    - [(13)  !font_size !font_color !backgroud_color]()
    - [(14)  !data_comp_name　!data_comp　!data_subcomp]()
    - [(15)  !method]()
* [8.  ユーザーサブルーチン]()
    - [8.1 ユーザー定義材料の入力]()
    - [8.2 弾塑性変形に関わるサブルーチン]()
    - [8.3 弾性変形に関わるサブルーチン]()
    - [8.4 ユーザー定義材料に関わるサブルーチン]()
    - [8.5 ユーザー定義外部荷重の処理サブルーチン]()
* [9.  例題検証]()
    - [9.1 単純形状モデルによる検証]()
    - [(1) 弾性静解析]()
    - [(2) 非線形静解析]()
    - [(3) 固有値解析]()
    - [(4) 熱伝導解析]()
    - [(5) 線形動解析]()
    - [(6) 周波数応答解析]()
    - [9.2 弾性静解析用実モデル例題]()
    - [9.2.1 解析モデル]()
    - [9.2.2 解析結果]()
    - [9.2.2.1 解析結果例]()
    - [9.2.2.2 検証例題EX02による解析性能の検証結果]()
    - [9.2.2.3 検証例題EX01A による計算時間の比較]()
    - [9.3 固有値解析用実モデル例題]()
    - [9.3.1 解析モデル]()
    - [9.3.2 解析結果]()
    - [(1) EX06 タービンブレード]()
    - [(2) EX07 タービンロータ]()
    - [(3) EX08スプリング]()
    - [(4) EX09 円筒シェル]()
    - [(5) EX10Aワイングラス]()
    - [9.4 熱伝導解析用実モデル例題]()
    - [9.4.1 解析モデル]()
    - [9.4.2 解析結果]()
    - [9.5 線形動的解析用実モデル例題]()
    - [9.5.1 解析モデル]()
    - [9.5.2 解析結果]()

<a id="section1"></a>
## 1.  はじめに
### 1.1 本書の位置づけ

FrontISTRが対象範囲とする解析に関するデータの入力方法の解説およびFrontISTRの実行方法について記述したものである。

1.2 本書の目的
本書では、ユーザーがFrontISTRを実行するにあたり、プログラム特有のデータ構造と解析機能の基本的な内容について記述する。FrontISTRでの解析実行制御は、全体制御データ、計算制御データを指定する必要がある。またメッシュに関するデータについては分散メッシュファイルを入力し解析を実行する。以下の章より、これらの制御データの入力方法および入力データの関連についてその詳細を説明する。

1.3 Ver.3.6における更新内容
FrontISTR Ver.3.6において、以下に示す機能が追加された：

* 入出力
    - ファイル読込の高速化
    - 781シェル要素と761シェル要素を使用した場合の出力変更
    - デバッグ用のメッセージ消去
* リファイナ
    - !EQUATIONの定義で，右辺の定数を設定した場合に，正しくリファインされない不具合を修正
* 解析
    - 周波数応答解析に関する修正
    - !SOLUTION,TYPE=STATICを通る場合の熱応力解析に関する修正
    - !SOLUTION,TYPE=NLSTATICを通る場合の圧力法線方向更新に関する修正
    - 接触剛性マトリックスのサブルーチンgetContactStiffnessの修正
* 要素
    - 要素ループのOpenMP並列化
    - B-bar要素 (ソリッド要素) に関する修正
    - シェル要素に関する修正
    - トラス要素に関する修正
    - シェル，ビーム，トラス，ソリッドが全て混在した場合に発生するメモリ不正の修正
* 材料
    - 直交異方弾性体に関する修正
* 線形ソルバー
    - 行列ダンプ機能の修正
    - 3×3 ILU前処理の省メモリ化
    - 4×4 CGソルバーの追加
    - 6×6 CGソルバーの追加
    - 3×3 CG, GMRESソルバーによる前処理適用後行列の条件数推定（試験的）
    - 3×3 CGソルバーへの発散チェック追加
    - 3×3ソルバー使用時の前処理セットアップ情報の再利用
    - 3×3ソルバー用外部AMG前処理ライブラリ（ML）へのインターフェース（試験的）
    - 3×3ソルバーの行列ベクトル積での通信隠蔽（試験的）
    - 陽的な自由度消去法による多点拘束条件処理
    - 接触解析における反復法ソルバーの利用（試験的）
* パーティショナ
    - ファイル入力の高速化
    - ログ出力の機能拡張
    - 分散メッシュ作成ループのOpenMP並列化

1.4 Ver.3.5における更新内容
FrontISTR Ver.3.5において、以下に示す機能が追加された：

* 解析機能関連
    - シェル・梁要素とソリッド要素の混在解析対応（3.7、4.1、6.3(3)参照）
    - シェル要素における直交異方性材料対応（4.2.2(3)参照）
    - 積層シェル対応（4.2.2(3)参照）
    - 大変形解析の際の圧力荷重のFOLLOW機能（7.4.2(14)参照）
    - 梁要素の動解析対応（3.7参照）
    - 動解析における複数節点のモニタリング（7.4.5(1)参照）
    - 動解析における節点応力・節点ひずみのモニタリング（7.4.5(1)参照）
    - 連成解析における入力流体力へのウィンドウ関数の適用（7.4.5(4)参照）
* パーティショナ関連
    - 大幅な高速化
    - Metis Ver.5系列への対応（インストールマニュアル参照）
* メッシュ・リファイン関連
    - 要素タイプ混在モデルのリファイン対応
    - 入力温度データのリファイン情報に基づく補間に対応
* 線形ソルバ関連（7.4.6(1)参照）
    - 前処理におけるマルチカラー処理およびハイブリッド並列対応
    - ベクトル計算機向けオーダリング
    - 自由度３の問題で利用可能な前処理と反復解法の組み合わせの拡大
    - 行列データのダンプ機能
* また、以下に示す修正が行われた：
    - シェル要素のDrilling DOFの修正
    - 非線形解析における収束判定の修正
    - 線形動解析のリスタート時の時刻の修正
    - 連成解析時のメッセージ内の節点番号表示の修正
    - ILU前処理の修正
    - 一部のコンパイラによる最適化時の不具合回避








