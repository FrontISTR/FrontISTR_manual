# 解析手順

## 逐次処理による解析

### 実行の流れ

FrontISTRを利用した、シングルプロセッサーの逐次処理による実行の流れを図3.1.1に示します。

図3.1.1　逐次処理による実行の流れ

### 準備する入力ファイル

#### (1) 全体制御データ（拡張子dat）

このファイルではメッシュデータと解析制御データの入力ファイルおよび解析結果出力ファイルを指定します。ファイル名は固定のhecmw\_ctrl.datです。

全体制御データの例を以下に示します。本例では、FrontSTRは単一領域メッシュデータmodel.mshと解析制御データmodel.cntを読み込み、解析結果データmodel.res.0.1を書き出します。また、hecmw\_visは単一領域メッシュデータmodel.mshと解析結果データmodel.res.0.1を読み込み、出力指定に対応するmodel\_vis\_psf.0000.(拡張子)を書き出します。詳細はユーザーマニュアル第5章を参照ください。

#### (2) 単一領域メッシュデータ（拡張子msh）

このファイルでは、解析対象の全体メッシュ構成、材料データ、解析制御データで使用するグループデータなどを定義します。詳細はユーザーマニュアル第6章を参照ください。

#### (3) 解析制御データ（拡張子cnt）

このファイルでは、解析種別、変位境界条件、荷重境界条件などを定義します。また、ソルバーの制御データやビジュアライザーの制御データも指定します。3章で解析制御データの例を示します。詳細はユーザーマニュアル第7章を参照ください。

#### (4) 可視化制御データ（拡張子ini）

このファイルでは、hecmw\_visの制御データを指定します。ディフォルトのファイル名はhecmw\_vis.iniです。可視化制御データの例を以下に示します。本例では、MicroAVS用の非構造格子型データ（拡張子inp）を出力します。詳細はユーザーマニュアル7.3.3節および7.4.7節を参照ください。

### 実行方法

FrontISTRは、入力ファイルがあるディレクトリにおいて以下のコマンドラインで実行します。

```
$ fistr1
```

可視化はふたつの方法で実行することができます。ひとつは、FrontISTRの後処理として実行する場合で、解析制御データに

```
!WRITE, VISUAL
```

を指定することにより、自動的に実行されます。この場合、可視化制御データを解析制御データに含めて記述することが必要です。

FrontISTRの実行終了後に可視化を行う場合は、まず解析制御データに

```
!WRITE, RESULT
```

を指定し、FrontISTRを実行します。

FrontISTRの実行終了後、入力ファイルと解析結果ファイルがあるディレクトリにおいて以下のコマンドラインでhecmw\_visを実行します。

```
$ hecmw\_vis1
```

### 出力ファイルの説明

#### (1) 解析結果メッセージファイル（拡張子msg）

本ファイルには、FrontISTRの解析進行過程などのメッセージが出力されます。1回の実行でひとつのファイルが作成され、フィル名は固定のFSTR.msgです。

#### (2) 解析結果ログファイル（拡張子log）

本ファイルには、FrontISTRの節点ごとおよび要素ごとの物理量の解析結果が出力されます。また、物理量の最大/最小値や固有値解析結果も出力されます。動解析の場合、すべてのステップの解析結果が本ファイルに出力されます。1回の実行でひとつのファイルが作成され、フィル名は固定の0.logです。

#### (3) 解析結果ファイル（拡張子なし）

本ファイルは、!WRITE, RESULTオプションを指定した場合に出力されます。

本ファイルには、FrontISTRの節点ごとおよび要素ごとの物理量の解析結果が出力されます。ステップごとにファイルが生成され、ファイル名は全体制御データで指定したファイルヘッダーを用いて、以下のように命名されます。

命名則：(!RESUTで指定したファイルヘッダー).0.(ステップ番号)

例：model.res.0.1

#### (4) 解析結果ビットマップファイル（拡張子bmp）

本ファイルは、可視化制御データで指定した場合に出力されます。

本ファイルには、可視化処理を行ったビットマップデータが出力されます。ファイル名は全体制御データで指定したファイルヘッダーを用いて命名されます。命名則の詳細は、hecmw1のドキュメント（0803\_001f\_hecmw\_PC\_cluster\_201\_vis.pdf）を参照ください。

#### (5) 解析結果非構造格子型データファイル（拡張子inp）

本ファイルは、可視化制御データで指定した場合に出力されます。

本ファイルを用いて、REVOCAP\_PrePostやMicroAVSなどでポスト処理が可能です。ファイル名は全体制御データで指定したファイルヘッダーを用いて、以下のように命名されます。

命名則：(!RESUTで指定したファイルヘッダー)\_psf.(ステップ番号).inp

例：model\_vis\_psf.0000.inp

#### (6) 解析結果ニュートラルファイル（拡張子neu）

本ファイルは、可視化制御データで指定した場合に出力されます。

本ファイルを用いて、Femapでポスト処理が可能です。ファイル名は全体制御データで指定したファイルヘッダーを用いて、以下のように命名されます。

命名則：(!RESUTで指定したファイルヘッダー)\_psf.(ステップ番号).neu

例：model\_vis\_psf.0000.neu

注：この他にFSTR.dbgファイルが出力されますが、デバッグ用ですので通常は参照不要です。

## 並列処理による解析

### 実行の流れ

FrontISTRを利用した、マルチプロセッサーの並列処理による実行の流れを図3.2.1に示します。

図3.2.1　並列処理による実行の流れ

### 準備する入力ファイル

#### (1) 全体制御データ（拡張子dat）

このファイルではメッシュデータと解析制御データの入力ファイルおよび解析結果出力ファイルを指定します。ファイル名は固定のhecmw\_ctrl.datです。

全体制御データの例を以下に示します。本例ではまず、hecmw\_partが単一領域メッシュデータmodel.msh
を読み込み、分散領域メッシュデータmodel\_8.0～nを書き出します。FrontSTRは分散領域メッシュデータmodel\_8.0～nと解析制御データmodel.cntを読み込み、解析結果データmodel.res.0～n.1を書き出します。また、hecmw\_visは分散領域メッシュデータmodel\_8.0～nと解析結果データmodel.res.0～n.1を読み込み、出力指定に対応するmodel\_vis\_psf.0000.(拡張子)を書き出します。詳細はユーザーマニュアル第5章を参照ください。

#### (2) 単一領域メッシュデータ（拡張子msh）

このファイルでは、解析対象の全体メッシュ構成、材料データ、解析制御データで使用するグループデータなどを定義します。詳細はユーザーマニュアル第6章を参照ください。

#### (3) 解析制御データ（拡張子cnt）

このファイルでは、解析種別、変位境界条件、荷重境界条件などを定義します。また、ソルバーの制御データやビジュアライザーの制御データも指定します。3章で解析制御データの例を示します。詳細はユーザーマニュアル第7章を参照ください。

#### (4) 領域分割ユーティリティ制御データ（拡張子dat）

このファイルでは、hecmw\_partの制御データを指定します。ファイル名は固定のhecmw\_part\_ctrl.datです。領域分割ユーティリティ制御データの例を以下に示します。本例では、領域分割法PMETISにより、単一領域を8分割します。また、領域分割後のメッシュを表示するためのファイルmodel\_8.inpを出力します。詳細はhecmw1のドキュメント（0803\_001x\_hecmw\_part\_201\_users.pdf）を参照ください。

#### (5) 可視化制御データ（拡張子ini）

このファイルでは、hecmw\_visの制御データを指定します。ディフォルトのファイル名はhecmw\_vis.iniです。可視化制御データの例を以下に示します。本例では、MicroAVS用の非構造格子型データ（拡張子inp）を出力します。詳細はユーザーマニュアル7.3.3節および7.4.7節を参照ください。

### 実行方法

hecmw\_partは、入力ファイルがあるディレクトリにおいて以下のコマンドラインで実行します。

```
$ hecmw\_part1
```

FrontISTRは、入力ファイルがあるディレクトリにおいて以下のコマンドラインで実行します。なお、MPIプロセスの実行方法はそれぞれの環境に合わせて、修正が必要です。

```
$ mpirun –np 8 fistr1
```

可視化はふたつの方法で実行することができます。ひとつは、FrontISTRの後処理として実行する場合で、解析制御データに

!WRITE, VISUAL

を指定することにより、自動的に実行されます。この場合、可視化制御データを解析制御データに含めて記述することが必要です。

FrontISTRの実行終了後に可視化を行う場合は、まず解析制御データに

!WRITE, RESULT

を指定し、FrontISTRを実行します。

FrontISTRの実行終了後、入力ファイルと解析結果ファイルがあるディレクトリにおいて以下のコマンドラインでhecmw\_visを実行します。なお、MPIプロセスの実行方法はそれぞれの環境に合わせて、修正が必要です。

\$ mpirun –np 8 hecmw\_vis1

### 出力ファイルの説明

#### (1) 領域分割ユーティリティログファイル（拡張子log）

本ファイルには、hecmw\_partの解析進行過程などのメッセージが出力されます。フィル名は固定のhecmw\_part.logです。

#### (2) 分散領域メッシュファイル（拡張子なし）

本ファイルには、領域分割されたメッシュ構成、材料データ、解析制御データで使用するグループデータなどが出力されます。ファイルは分散領域ごとに作成され、ファイル名は全体制御データで指定したファイルヘッダーを用いて、以下のように命名されます。

命名則：(!MESHで指定したファイルヘッダー).(分散領域番号)

例：model\_8.0　～　model\_8.7

#### (3) 領域分割メッシュ表示用ファイル（拡張子inp）

本ファイルには、領域分割されたメッシュを表示するための非構造格子型データが出力されます。MicroAVSなどで表示できます。

#### (4) 解析結果メッセージファイル（拡張子msg）

本ファイルには、FrontISTRの解析進行過程などのメッセージが出力されます。1回の実行でひとつのファイルが作成され、フィル名は固定のFSTR.msgです。

#### (5) 解析結果ログファイル（拡張子log）

本ファイルには、FrontISTRの節点ごとおよび要素ごとの物理量の解析結果が出力されます。また、物理量の最大/最小値や固有値解析結果も出力されます。動解析の場合、すべてのステップの解析結果が本ファイルに出力されます。ファイルは分散領域ごとに作成され、フィル名は固定のn.log（nは分散領域番号）です。

#### (6) 解析結果ファイル（拡張子なし）

本ファイルは、!WRITE, RESULTオプションを指定した場合に出力されます。

本ファイルには、FrontISTRの節点ごとおよび要素ごとの物理量の解析結果が出力されます。分散領域ごとかつステップごとにファイルが生成され、ファイル名は全体制御データで指定したファイルヘッダーを用いて、以下のように命名されます。

命名則：(!RESUTで指定したファイルヘッダー).(分散領域番号).(ステップ番号)

例：model\_8.res.0.1　～　model\_8.res.7.1

#### (7) 解析結果ビットマップファイル（拡張子bmp）

本ファイルは、可視化制御データで指定した場合に出力されます。

本ファイルには、可視化処理を行ったビットマップデータが出力されます。ファイル名は全体制御データで指定したファイルヘッダーを用いて命名されます。命名則の詳細は、hecmw1のドキュメント（0803\_001f\_hecmw\_PC\_cluster\_201\_vis.pdf）を参照ください。

#### (8) 解析結果非構造格子型データファイル（拡張子inp）

本ファイルは、可視化制御データで指定した場合に出力されます。

本ファイルを用いて、REVOCAP\_PrePostやMicroAVSなどでポスト処理が可能です。ファイル名は全体制御データで指定したファイルヘッダーを用いて、以下のように命名されます。

命名則：(!RESUTで指定したファイルヘッダー)\_psf.(ステップ番号).inp

例：model\_vis\_psf.0000.inp

#### (9) 解析結果ニュートラルファイル（拡張子neu）

本ファイルは、可視化制御データで指定した場合に出力されます。

本ファイルを用いて、Femapでポスト処理が可能です。ファイル名は全体制御データで指定したファイルヘッダーを用いて、以下のように命名されます。

命名則：(!RESUTで指定したファイルヘッダー)\_psf.(ステップ番号).neu

例：model\_vis\_psf.0000.neu

注：この他にFSTR.dbg.0～nファイルが出力されますが、デバッグ用ですので通常は参照不要です。
