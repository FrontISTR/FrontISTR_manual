## 全体制御データ

### 全体制御データ概要

全体制御データは、FrontISTRに対する入出力ファイルのファイル名を定義するものである。

全体制御データファイルの特徴は以下のとおりである。

  * 自由書式に基づくASCII形式のファイルである。
  * "`!`"で始まるヘッダーとそれに続くデータから構成されている。
  * ヘッダーの記述の順番は基本的に自由である。
  * データの区切り記号には"`,`"を使用する。

### 入力規則

全体制御データファイルは、ヘッダー行、データ行、コメント行から構成される。

ヘッダー行には必ず一つのヘッダーが含まれる。

ヘッダー
:   全体制御データファイル内で、データの意味とデータブロックを特定する。
    行頭が "!" で始まる場合、ヘッダーであるとみなされる。

ヘッダー行
:   ヘッダーとそれに伴うパラメータを記述する。
    ヘッダー行はヘッダーで始まっていなければならない。
    パラメータが必要な場合は、"," を用いてその後に続けなければならない。
    パラメータが値をとる場合は、パラメータの後に "=" が続き、その後に値を記述する。
    ヘッダー行を複数行にわたって記述することはできない。

データ行
:   ヘッダー行の次の行から開始され、必要なデータを記述する。
    データ行は複数行にわたる可能性があるが、それは各ヘッダーで定義されるデータ記述の規則により決定される。
    データ行は必要ない場合もある。

区切り文字
:    データの区切り文字にはカンマ "," を用いる。

空白の扱い
:    空白は無視される。

名前
:   名前に使用可能な文字は、アンダースコア "_"、ハイフン "-"、英数字 "a-z A-Z 0-9" であるが、 最初の一文字は "_" または英字 "a-z A-Z" で始まっていなければならない。
    大文字小文字の区別はなく、内部的にはすべて大文字として扱われる。
    また、名前の最大長は63文字である。

ファイル名
:   ファイル名に使用可能な文字は、アンダースコア "_"、ハイフン "-"、ピリオド "."、スラッシュ "/"、英数字 "a-z A-Z 0-9" である。
    ファイル名は、特に記述がない限りパスを含んでもよい。相対パス、絶対パスのいずれも指定可能である。
    また、ファイル名の最大長は1023文字である。

浮動小数点データ
:   指数はあってもなくてもよい。指数の前には、"E" または "e" の記号をつけなければならない。
    "E" または "e" どちらを使用してもかまわない。"D" または "d" は使用不可。

!!, # コメント行
:    行頭が"!!"または"#"で始まる行はコメント行とみなされ、無視される。コメント行はファイル中の任意の位置に挿入でき、その数に制限はない。

### ヘッダー一覧

全体制御データは以下のヘッダーによって構成されている。

|ヘッダー名  |内容                      |
|:-----------|:-------------------------|
|`!CONTROL`  |解析制御データ定義        |
|`!MESH`     |メッシュデータ定義        |
|`!RESTART`  |リスタートデータ定義      |
|`!RESULT`   |解析結果データ定義        |
|`!SUBDIR`   |サブディレクトリ分割指示  |

各ヘッダーには，パラメータとそれぞれのヘッダーに対応したデータの項目がある。
以下，上記各ヘッダーについてデータ作成例とともに説明する。

#### `!CONTROL`

解析制御データファイルを指定する。

```
!CONTROL, NAME=<name>
file

#使用例
!CONTROL, NAME=fstrCNT
myctrl.cnt
```

| パラメータ |                |
|:-----------|:---------------|
| `NAME`     |識別子（必須）  |

| パラメータ名  |パラメータ値  |内 容           |
|:--------------|:-------------|:---------------|
| `NAME`        |`fstrCNT`     |解析制御データ  |

| 変数名  |内容                                                                                                            |
|:--------|:---------------------------------------------------------------------------------------------------------------|
| file    |解析制御データファイル名（相対パス、絶対パス共に指定可能。相対パスの場合はカレントディレクトリからのパスとなる）|

#### `!MESH`

メッシュデータファイルを指定する。

```
!MESH, NAME=<name>, TYPE=<type> [,optional parameter]
fileheader

#使用例
!MESH, NAME=fstrMSH, TYPE=HECMW-DIST, REFINE=1
Mesh.in
```

| パラメータ  |                            |
|:------------|:---------------------------|
| `NAME`      |識別子（必須）              |
| `TYPE`      |メッシュタイプ（必須）      |
| `IO`        |入出力指定（省略可）        |
| `REFINE`    |メッシュ細分化指定（任意）  |

| パラメータ名 | パラメータ値    | 内 容                        |
|:-------------|:----------------|:-----------------------------|
| `NAME`       | `fstrMSH`       | Solver入力データ             |
|              | `part_in`       | Partitioner入力データ        |
|              | `part_out`      | Partitioner出力データ        |
| `TYPE`       | `HECMW-DIST`    | HEC-MW分散メッシュデータ     |
|              | `HECMW-ENTIRE`  | HEC-MW単一領域メッシュデータ |
| `IO`         | `IN`            | 入力用（デフォルト）         |
|              | `OUT`           | 出力用                       |
| `REFINE`     | &lt;integer&gt; | メッシュ細分化回数           |

| 変数名      |内容                                                                  |
|:------------|:---------------------------------------------------------------------|
| fileheader  |メッシュデータファイル名のヘッダー（相対パス、絶対パス共に指定可能。相対パスの場合はカレントディレクトリからのパスとなる）                |

注意

`IO`パラメータの有無、パラメータ値は動作に何も影響を与えない。

`TYPE`が`HECMW-DIST`の場合、データ行に指定するfileheaderはファイル名末尾の「.&lt;rank&gt;」を除いたものである。

#### `!RESTRAT`

リスタートデータファイルを指定する。

```
!RESTART, NAME=<name>, IO=<io>
fileheader

#使用例
!RESTART, NAME=restart-in, IO=IN
restart.in
```

| パラメータ  |内容              |
|:------------|:-----------------|
| `NAME`      |識別子（必須）    |
| `IO`        |入出力指定（必須）|

| パラメータ名  |パラメータ値  |内容          |
|:--------------|:-------------|:-------------|
| `NAME`        |&lt;name&gt;  |ユーザー識別子|
| `IO`          |IN            |入力用        |
|               |OUT           |出力用        |
|               |INOUT         |入出力兼用    |

| 変数名      |内容                                                                                                                            |
|:------------|--------------------------------------------------------------------------------------------------------------------------------|
| fileheader  |リスタートデータファイル名のヘッダー<br/>(相対パス、絶対パス共に指定可能。相対パスの場合はカレントディレクトリからのパスとなる) |

** 注意 **
この定義によって生成されるファイル名は、"fileheader+.&lt;rank&gt;" となる。

#### `!RESULT`

解析結果データファイルを指定する。

```
!RESULT, NAME=<name> [,optional parameter]
fileheader

#使用例
!RESULT, NAME=fstrRES, IO=OUT, TYPE=BINARY
result.out
```

```
!RESULT, NAME=<name> [,optional parameter]
```

| パラメータ  | 内容               |
|:------------|:-------------------|
| `NAME`      |識別子（必須）      |
| `IO`        |入出力指定（省略可）|
| `TYPE`      |出力形式（省略可）  |

| パラメータ名  |パラメータ値  |内容                                    |
|:--------------|:-------------|----------------------------------------|
| `NAME`        |`fstrRES`     |Solver出力データ、Visualizer入力データ  |
|               |`fstrTEMP`    |温度入力データ（熱伝導解析結果）        |
|               |`vis_out`     |Visualizer出力データ                    |
| `IO`          |`IN`          |入力用                                  |
|               |`OUT`         |出力用                                  |
| `TYPE`        |`TEXT`        |テキスト形式（デフォルト）              |
|               |`BINARY`      |バイナリー形式                          |

| 変数名      |内容 |
|:------------|:---------------------------------------------------------------------|
| fileheader  |解析結果データファイル名のヘッダー（相対パス、絶対パス共に指定可能。相対パスの場合はカレントディレクトリからのパスとなる） |

** 注意 **
この定義によって生成されるファイル名は、"fileheader+.&lt;rank&gt;" となる。

#### `!SUBDIR`

ファイル格納のサブディレクトリ分割を指定する。

```
!SUBDIR, ON [,optional parameter]

#使用例
!SUBDIR, ON, LIMIT=8000
```

!SUBDIR, ON \[,optional parameter\]

| パラメータ  |内容                |
|:------------|:-------------------|
| `ON`        |有効（必須）        |
| `LIMIT`     |ファイル数（省略可）|

| パラメータ名  |パラメータ値     |内容                                                 |
|:--------------|:----------------|:----------------------------------------------------|
| `ON`          |なし             |                                                     |
| `LIMIT`       |&lt;integer&gt;  |１ディレクトリあたり最大ファイル数(デフォルト: 5000) |

** 注意 **
この定義によって、複数ファイルで構成される入出力データは自動的にサブディレクトリ配下となる。
並列数がLIMITを超える場合、さらに`TRUNK0`、`TRUNK1`、・・・・のサブディレクトリ配下となる。


